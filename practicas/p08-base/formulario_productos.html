<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Registro de datos "Productos"</title>
    <style type="text/css">
        ol,
        ul {
            list-style-type: none;
        }
    </style>
</head>

<body>
    <h1>Registro de datos</h1>

    <form id="formulario" action="http://localhost:81/proyectos/tecweb/practicas/p08-base/set_producto_v2.php"
        method="post">

        <h2>Información</h2>

        <fieldset>
            <ul>
                <li><label for="form-name">Nombre:</label> <input type="text" name="nombre" id="form-name"></li><br>

                <li><label for="cars">Marca:</label>
                    <select name="marca" id="form-marca">
                        <option value="nike">Nike</option>
                        <option value="adidas">Adidas</option>
                        <option value="reebok">Reebok</option>
                        <option value="salomon">Salomon</option>
                    </select>
                </li><br>

                <li><label for="form-modelo">Modelo:</label> <input type="text" name="modelo" id="form-modelo"></li><br>
                <li><label for="form-precio">Precio:</label> <input type="number" step="0.01" name="precio"
                        id="form-precio"></li><br>
                <li><label for="form-detalles">Detalles:</label><textarea name="detalles" id="form-detalles"></textarea>
                </li><br>
                <li><label for="form-unidades">Unidades:</label> <input type="number" name="unidades"
                        id="form-unidades"></li><br>
                <li><label for="form-imagen">Imagen_url:</label> <input type="text" name="imagen" id="form-imagen"></li>

            </ul>
        </fieldset>

        <p>
            <input type="submit" value="Subir">
            <input type="reset">
        </p>

    </form>
    <script>
        document.getElementById("formulario").addEventListener("submit", function (event) {
            event.preventDefault();

            //
            let nombre = document.getElementById("form-name").value;
            let marca = document.getElementById("form-marca").value;
            let modelo = document.getElementById("form-modelo").value;
            let precioV = document.getElementById("form-precio").value;
            let precio = parseFloat(precioV);
            let detalles = document.getElementById("form-detalles").value;
            let unidadesV = document.getElementById("form-unidades").value;
            let unidades = parseInt(unidadesV, 10);
            let imagenEl = document.getElementById("form-imagen");
            let imagen = imagenEl.value.trim();

            //Nombre
            if (!nombre) { 
                alert("El nombre es requerido"); 
                return; 
            }
            if (nombre.length > 100) { 
                alert("El nombre debe tener 100 caracteres o menos"); 
                return; 
            }

            //Marca
            if (!marca) { 
                alert("La marca es requerida"); 
                return; 
            }

            //Modelo
            if (!modelo) { 
                alert("El modelo es requerido"); 
                return; 
            }
            if (!modelo.match(/^[A-Za-z0-9]+$/)) { 
                alert("El modelo debe ser alfanumérico"); 
                return; 
            }
            if (modelo.length > 25) { 
                alert("El modelo debe tener 25 caracteres o menos"); 
                return; 
            }

            //Precio
            if (precioV === "" || isNaN(precio)) { 
                alert("El precio es requerido"); 
                return; 
            }
            if (precio <= 99.99) { 
                alert("El precio debe ser mayor a 99.99"); 
                return; 
            }

            //Detalles
            if (detalles.length > 250) { 
                alert("Los detalles debe ser menor a 250 caracteres"); 
                return; 
            }

            //Unidades
            if (unidadesV === "" || isNaN(unidades)) { 
                alert("Las unidades son requeridas"); 
                return; 
            }
            if (unidades < 0) { 
                alert("Las unidades deben ser 0 o más"); 
                return; 
            }

            // imagen
            if (!imagen) {
                imagenEl.value = "img/imagen.png"; 
            }

            //Enviamos el formulario
            this.submit();
        });
    </script>

</body>

</html>